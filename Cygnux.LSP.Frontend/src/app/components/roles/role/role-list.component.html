<div class="page-body">
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header pb-0">
                        <div class="row">
                            <div class="col-sm-6">
                                <h4>Roles</h4>
                            </div>
                            <div class="col-sm-6">
                                <button class="btn btn-square btn-primary pull-right rounded-3" type="button"
                                (click)="openModal()"><i class="icon-plus"></i>Add Role</button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive theme-scrollbar">
                            <table class="table table-header align-middle w-100">
                                <thead class="table-light">
                                  <tr class="table-th">
                                    <th class="w-25">Role Name</th>
                                    <th class="w-8 text-center">Active</th>
                                    <th class="w-8 text-center">Action
                                      <!-- <img src="../assets/images/add-line.svg" title="Switch to inserting" height="25"> -->
                                    </th>
                                  </tr>
                                  <tr class="table-th">
                                    <th class="w-25"><input type="text" class="form-control" /></th>
                                    <th class="w-8"></th>
                                    <th class="w-8 text-center" >
                                      <!-- <div class="align-items-center d-flex justify-content-center gap-3 pt-2 pb-2 text-center cursor-pointer">
                                        <img src="../assets/images/Search.png" title="Search" height="15">
                                        <svg xmlns="http://www.w3.org/2000/svg" title="Clear filter" viewBox="0 0 24 24" fill="rgba(21,141,247,1)" height="18">
                                          <path d="M21 4V6H20L15 13.5V22H9V13.5L4 6H3V4H21ZM6.4037 6L11 12.8944V20H13V12.8944L17.5963 6H6.4037Z"></path>
                                        </svg>
                                      </div> -->
                                    </th>
                                  </tr>
                                </thead>
                              </table>
                              <div class=" mb-3">
                                <table class="customers w-100">
                                  <tr *ngFor="let role of roles; let i = index">
                                    <td class="w-25">{{role.roleName}}</td>
                                    <td class="w-8 text-center"><i [ngClass]="role.isActive ? 'fa fa-check-circle text-success' : 'fa fa-times-circle text-danger'"></i></td>
                                    <td class="w-8">
                                      <div class="cursor-pointer d-flex justify-content-center text-center gap-3 p-1">
                                        <div>
                                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="rgba(36,105,92,1)" class="m-0"  height="20" (click)="editModal($event,role.id)"><path d="M12.8995 6.85453L17.1421 11.0972L7.24264 20.9967H3V16.754L12.8995 6.85453ZM14.3137 5.44032L16.435 3.319C16.8256 2.92848 17.4587 2.92848 17.8492 3.319L20.6777 6.14743C21.0682 6.53795 21.0682 7.17112 20.6777 7.56164L18.5563 9.68296L14.3137 5.44032Z"></path></svg>
                                        </div>
                                        <div>
                                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="rgba(255,83,112,1)" class="m-0"  height="20" (click)="deleteModal($event,role.id)"><path d="M17 4H22V6H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V6H2V4H7V2H17V4ZM9 9V17H11V9H9ZM13 9V17H15V9H13Z"></path></svg>
                                        </div>
                                        <div>
                                            <a href="#" (click)="permissionModal($event,role.id)"><i class="icon-map"></i></a>
                                        </div>
                                      </div>
                                    </td>
                                  </tr>
                                  <div *ngIf="roles.length===0">
                                    <div class="text-center"> 
                                      <lord-icon src="/assets/json/system-solid-716-spinner-three-dots-loop-scale.json"
                                        trigger="loop" colors="primary:#121331,secondary:#08a88a" style="width: 100px; height: 100px">
                                      </lord-icon>
                                    </div>
                                  </div>
                                </table>
                              </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade editDialog" id="exampleModalLong" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLongTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Role</h5>
                <button class="btn-close" type="button" (click)="closeEditModal()"></button>
            </div>
            <div class="modal-body" style="padding:0px;">
                <app-add-role (dataEmitter)="closeEditModal()" [roleResponse]="selectedRole"></app-add-role>
            </div>
        </div>
    </div>
</div>

<div class="modal fade editDialog" id="exampleModalPermission" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLongTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Assign Permissions</h5>
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"
                data-bs-original-title="" title=""></button>
            </div>
            <div class="modal-body" style="padding:0px;">
                <app-role-permission (permissionEmitter)="closePermissionModal()"  [roleId]="selectedRoleId"></app-role-permission>
            </div>
        </div>
    </div>
</div>
<div class="modal fade in" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Delete Confirmation</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete this role?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" (click)="deleteRole()">Delete</button>
            </div>
        </div>
    </div>
</div>